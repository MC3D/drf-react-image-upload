(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{36:function(e,t,a){e.exports=a(64)},41:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(32),l=a.n(r),o=(a(41),a(33)),s=a(9),c=null!==localStorage.getItem("my-app-token"),u=function(e){var t=e.component,a=Object(o.a)(e,["component"]);return i.a.createElement(s.b,Object.assign({},a,{render:function(e){return c?i.a.createElement(t,e):i.a.createElement(s.a,{to:{pathname:"/login/",state:{from:e.location}}})}}))},h=a(17),m=a(10),d=a(11),p=a(12),g=a(14),b=a(13),f=a(3),v=a(15),E=a(6),C=a.n(E);C.a.defaults.xsrfCookieName="csrftoken",C.a.defaults.xsrfHeaderName="X-CSRFToken";var j=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).state={caption:"",image:null,preview:""},a.handleChange=a.handleChange.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.handleImageChange=a.handleImageChange.bind(Object(f.a)(a)),a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"handleImageChange",value:function(e){var t=this,a=e.target.files[0];this.setState({image:a});var n=new FileReader;n.onloadend=function(){t.setState({preview:n.result})},n.readAsDataURL(a)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=new FormData;a.append("caption",this.state.caption),a.append("image",this.state.image),C.a.post("/api/v1/boards/",a,{headers:{"content-type":"multipart/form-data"}}).then((function(e){var a=Object(h.a)(t.state.images);a.push(e.data),t.setState({images:a})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("input",{type:"text",name:"caption",value:this.state.caption,onChange:this.handleChange}),i.a.createElement("input",{type:"file",name:"image",onChange:this.handleImageChange}),this.state.image?i.a.createElement("img",{src:this.state.preview,alt:"preview"}):null,i.a.createElement("button",null,"Upload"))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).state={images:[]},a.handleChange=a.handleChange.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.handleImageChange=a.handleImageChange.bind(Object(f.a)(a)),a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"handleImageChange",value:function(e){var t=this,a=e.target.files[0];this.setState({image:a});var n=new FileReader;n.onloadend=function(){t.setState({preview:n.result})},n.readAsDataURL(a)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=new FormData;a.append("caption",this.state.caption),a.append("image",this.state.image),C.a.post("/api/v1/boards/",a,{headers:{"content-type":"multipart/form-data"}}).then((function(e){var a=Object(h.a)(t.state.images);a.push(e.data),t.setState({images:a})})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;C.a.get("/api/v1/boards/").then((function(t){console.log(t),e.setState({images:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.images.map((function(e){return i.a.createElement("li",{key:e.id},i.a.createElement("p",null,e.caption),i.a.createElement("p",null,e.created_by.username),i.a.createElement("img",{src:e.image,alt:""}))}));return i.a.createElement("ul",null,e)}}]),t}(n.Component);C.a.defaults.xsrfCookieName="csrftoken",C.a.defaults.xsrfHeaderName="X-CSRFToken";var S=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).state={username:"",email:"",password:""},a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.handleChange=a.handleChange.bind(Object(f.a)(a)),a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),C.a.post("/api/v1/rest-auth/login/",this.state).then((function(e){localStorage.setItem("my-app-token",e.data.token),t.props.history.push("/")})).catch((function(e){console.log(e)}))}},{key:"handleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("p",null,i.a.createElement("label",{htmlFor:"username"},"Username"),i.a.createElement("input",{id:"username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange,placeholder:"Enter username",required:!0})),i.a.createElement("p",null,i.a.createElement("label",{htmlFor:"email"},"Email"),i.a.createElement("input",{id:"email",type:"email",name:"email",value:this.state.email,onChange:this.handleChange,placeholder:"Enter email",required:!0})),i.a.createElement("p",null,i.a.createElement("label",{htmlFor:"password"},"Password"),i.a.createElement("input",{id:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,placeholder:"Enter password",required:!0})),i.a.createElement("button",null,"Login"))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var k=a(19);l.a.render(i.a.createElement(k.a,null,i.a.createElement(s.d,null,i.a.createElement(s.b,{path:"/login/",component:S}),i.a.createElement(u,{path:"/boards/new/",component:j}),i.a.createElement(u,{exact:!0,path:"/",component:O}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.834d9574.chunk.js.map